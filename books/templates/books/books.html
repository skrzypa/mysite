{% extends "my_apps/homepage_base.html" %}

{% block content %}

<div class="col-11 mx-auto justify-content-center">
    {% if user.is_authenticated %}
        {{ new_book_form|safe }}
    {% endif %}

    <div class="btn-group mb-2" role="group" aria-label="Basic example">
        {% if user.is_authenticated %}
            <button class="btn btn-sm btn-success"
                    data-bs-toggle="offcanvas"
                    data-bs-target="#addBookOffcanvas">
                + Dodaj książkę
            </button>
        {% endif %}

        {% if all_books %}
            <!-- Przycisk Pokaż / Ukryj tytuły -->
            <button class="btn btn-sm btn-primary" onclick="toggleAllTitles()">
                Pokaż / Ukryj tytuły
            </button>
        {% else %}
            <button class="btn btn-sm btn-primary" onclick="toggleAllTitles()" disabled>
                Pokaż / Ukryj tytuły
            </button>
        {% endif %}
    </div>
    
    <br>
    {% comment %} <button class="btn btn-sm btn-warning">
        Zobacz co czytają inni
    </button> {% endcomment %}

    <!-- KSIĄŻKI --> 
    <div id="all_books" style="margin-top: 2rem">
        {% if not all_books %}
            <div class="text-center">
                <label class="h1">Dodaj książkę, którą udało ci się właśnie ukończyć!</label>
            </div>    
        {% else %}
            {{ all_books|safe }}
        {% endif %}
    </div>

</div>

<script>
    function toggleAllTitles() {
        const boxes = document.querySelectorAll(".book-box");

        boxes.forEach(box => {
            const title = box.querySelector(".book-title");

            if (box.style.width === "110px" || !box.style.width) {
                box.style.width = "300px";
                title.style.display = "block";
            } 
            
            else {
                box.style.width = "110px";
                title.style.display = "none";
            }
        });
    }
</script>

{% endblock content %}